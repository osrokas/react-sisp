{"version":3,"file":"static/js/1319.3e7c6221.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/renderers/support/clickToleranceUtils.js","../node_modules/@arcgis/core/views/2d/layers/TileLayerView2D.js","../node_modules/@arcgis/core/views/layers/TileLayerView.js","../node_modules/@arcgis/core/views/support/drapedUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nfunction t(t,e){return e?\"xoffset\"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):\"yoffset\"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function e(t){let e=0,n=0;for(let r=0;r<t.length;r++){const s=t[r].size;\"number\"==typeof s&&(e+=s,n++)}return e/n}function n(t,n){return\"number\"==typeof t?t:t&&t.stops&&t.stops.length?e(t.stops):n}function r(t,e){if(!e)return t;const r=e.filter((t=>\"size\"===t.type)).map((e=>{const{maxSize:r,minSize:s}=e;return(n(r,t)+n(s,t))/2}));let s=0;const o=r.length;if(0===o)return t;for(let n=0;n<o;n++)s+=r[n];const f=Math.floor(s/o);return Math.max(f,t)}function s(e){const n=e&&e.renderer,s=\"touch\"===(e&&e.event&&e.event.pointerType)?9:6;if(!n)return s;const o=\"visualVariables\"in n?r(s,n.visualVariables):s;if(\"simple\"===n.type)return t(o,n.symbol);if(\"unique-value\"===n.type){let e=o;return n.uniqueValueInfos.forEach((n=>{e=t(e,n.symbol)})),e}if(\"class-breaks\"===n.type){let e=o;return n.classBreakInfos.forEach((n=>{e=t(e,n.symbol)})),e}return n.type,o}export{s as calculateTolerance};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Error.js\";import i from\"../../../core/Logger.js\";import{isAbortError as s}from\"../../../core/promiseUtils.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import{BitmapTileLayerView2D as l}from\"./BitmapTileLayerView2D.js\";import{LayerView2DMixin as o}from\"./LayerView2D.js\";import{createBlankImage as h,resampleImage as n}from\"./support/imageUtils.js\";import c from\"../tiling/TileInfoView.js\";import u from\"../tiling/TileKey.js\";import p from\"../tiling/TileQueue.js\";import f from\"../tiling/TileStrategy.js\";import m from\"../../layers/LayerView.js\";import{RefreshableLayerView as y}from\"../../layers/RefreshableLayerView.js\";import{TileLayerView as w}from\"../../layers/TileLayerView.js\";import{createQueryGeometry as g}from\"../../support/drapedUtils.js\";const d=i.getLogger(\"esri.views.2d.layers.TileLayerView2D\"),_=[0,0];let I=class extends(w(y(l(o(m))))){constructor(){super(...arguments),this._tileStrategy=null,this._fetchQueue=null,this.layer=null}initialize(){const e=this.layer.tileInfo,i=e&&e.spatialReference;let s;i||(s=new t(\"layerview:tiling-information-missing\",\"The layer doesn't provide tiling information\",{layer:this.layer})),i.equals(this.view.spatialReference)||(s=new t(\"layerview:spatial-reference-incompatible\",\"The spatial reference of this layer does not meet the requirements of the view\",{layer:this.layer})),this.watch(\"resampling\",(()=>{this.doRefresh()})),s&&this.addResolvingPromise(Promise.reject(s))}get resampling(){return!(\"resampling\"in this.layer)||!1!==this.layer.resampling}update(e){this._fetchQueue.pause(),this._fetchQueue.state=e.state,this._tileStrategy.update(e),this._fetchQueue.resume(),this.notifyChange(\"updating\")}attach(){const e=\"tileServers\"in this.layer?this.layer.tileServers:null;this._tileInfoView=new c(this.layer.tileInfo,this.layer.fullExtent),this._fetchQueue=new p({tileInfoView:this._tileInfoView,concurrency:e&&10*e.length||10,process:(e,t)=>this.fetchTile(e,t)}),this._tileStrategy=new f({cachePolicy:\"keep\",resampling:this.resampling,acquireTile:e=>this.acquireTile(e),releaseTile:e=>this.releaseTile(e),tileInfoView:this._tileInfoView}),this.requestUpdate(),this.container.requestRender(),super.attach()}detach(){super.detach(),this._tileStrategy.destroy(),this._fetchQueue.clear(),this.container.removeAllChildren(),this._fetchQueue=this._tileStrategy=this._tileInfoView=null}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}createFetchPopupFeaturesQueryGeometry(e,t){return g(e,t,this.view)}async doRefresh(){this.updateRequested||this.suspended||(this._fetchQueue.reset(),this._tileStrategy.tiles.forEach((e=>this._enqueueTileFetch(e))),this.notifyChange(\"updating\"))}isUpdating(){var e;return(null==(e=this._fetchQueue)?void 0:e.length)>0}acquireTile(e){const t=this._bitmapView.createTile(e),i=t.bitmap;return[i.x,i.y]=this._tileInfoView.getTileCoords(_,t.key),i.resolution=this._tileInfoView.getTileResolution(t.key),[i.width,i.height]=this._tileInfoView.tileInfo.size,this._enqueueTileFetch(t),this._bitmapView.addChild(t),this.requestUpdate(),t}releaseTile(e){this._fetchQueue.abort(e.key.id),this._bitmapView.removeChild(e),e.once(\"detach\",(()=>e.destroy())),this.requestUpdate()}async fetchTile(e,t={}){const i=\"tilemapCache\"in this.layer?this.layer.tilemapCache:null,{signal:r,resamplingLevel:a=0}=t;if(!i)try{return await this._fetchImage(e,r)}catch(c){if(!s(c)&&!this.resampling)return h(this._tileInfoView.tileInfo.size);if(a<3){const i=this._tileInfoView.getTileParentId(e.id);if(i){const s=new u(i),r=await this.fetchTile(s,{...t,resamplingLevel:a+1});return n(this._tileInfoView,r,s,e)}}throw c}const l=new u(0,0,0,0);let o;try{if(await i.fetchAvailabilityUpsample(e.level,e.row,e.col,l,{signal:r}),l.level!==e.level&&!this.resampling)return h(this._tileInfoView.tileInfo.size);o=await this._fetchImage(l,r)}catch(c){if(s(c))throw c;o=await this._fetchImage(e,r)}return this.resampling?n(this._tileInfoView,o,l,e):o}async _enqueueTileFetch(e){if(!this._fetchQueue.has(e.key.id)){try{const t=await this._fetchQueue.push(e.key);e.bitmap.source=t,e.bitmap.width=this._tileInfoView.tileInfo.size[0],e.bitmap.height=this._tileInfoView.tileInfo.size[1],e.once(\"attach\",(()=>this.requestUpdate()))}catch(t){s(t)||d.error(t)}this.requestUpdate()}}async _fetchImage(e,t){return this.layer.fetchTile(e.level,e.row,e.col,{signal:t})}};e([r()],I.prototype,\"resampling\",null),I=e([a(\"esri.views.2d.layers.TileLayerView2D\")],I);const T=I;export{T as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Error.js\";import{isSome as t}from\"../../core/maybe.js\";import{eachAlways as o}from\"../../core/promiseUtils.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";import{calculateTolerance as p}from\"../../renderers/support/clickToleranceUtils.js\";const i=i=>{let c=class extends i{async fetchPopupFeatures(e,s){const{layer:a}=this;if(!e)return Promise.reject(new r(\"tilelayerview:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:a}));if(\"tile\"!==a.type)return Promise.reject(new r(\"tilelayerview:fetchPopupFeatures\",\"Layer type should be 'tile'\",{type:a.type}));const i=this.get(\"view.scale\"),c=a.allSublayers.toArray().filter((e=>{const r=0===e.minScale||i<=e.minScale,t=0===e.maxScale||i>=e.maxScale;return e.popupTemplate&&e.popupEnabled&&e.visible&&r&&t}));return o(c.map((async r=>{const o=r.createQuery(),a=t(s)?s.event:null,i=p({renderer:r.renderer,event:a});o.geometry=this.createFetchPopupFeaturesQueryGeometry(e,i),o.outFields=await r.popupTemplate.getRequiredFields();return(await r.queryFeatures(o)).features}))).then((e=>[].concat(...e.map((e=>e.value)).filter(Boolean))))}};return e([s()],c.prototype,\"layer\",void 0),c=e([a(\"esri.layers.mixins.TileLayerView\")],c),c};export{i as TileLayerView,i as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport\"../../geometry.js\";import{isSome as e,isNone as t}from\"../../core/maybe.js\";import{getMetersPerUnitForSR as r}from\"../../core/unitUtils.js\";import{calculateTolerance as n}from\"../../renderers/support/clickToleranceUtils.js\";import i from\"../../geometry/Extent.js\";function a(t,n,a,o=new i){let s;if(\"2d\"===a.type)s=n*a.resolution;else if(\"3d\"===a.type){const i=a.overlayPixelSizeInMapUnits(t),o=a.basemapSpatialReference;s=e(o)&&!o.equals(a.spatialReference)?r(o)/r(a.spatialReference):n*i}const m=t.x-s,p=t.y-s,c=t.x+s,l=t.y+s,{spatialReference:f}=a;return o.xmin=Math.min(m,c),o.ymin=Math.min(p,l),o.xmax=Math.max(m,c),o.ymax=Math.max(p,l),o.spatialReference=f,o}function o(e,r,i){const o=i.toMap(e);if(t(o))return!1;return a(o,n(),i,s).intersects(r)}const s=new i;export{a as createQueryGeometry,o as intersectsDrapedGeometry};\n"],"names":["t","e","xoffset","Math","max","abs","yoffset","n","stops","length","r","s","size","filter","type","map","maxSize","minSize","o","f","floor","renderer","event","pointerType","visualVariables","symbol","uniqueValueInfos","forEach","classBreakInfos","d","i","_","I","arguments","_tileStrategy","_fetchQueue","layer","this","tileInfo","spatialReference","equals","view","watch","doRefresh","addResolvingPromise","Promise","reject","resampling","pause","state","update","resume","notifyChange","tileServers","_tileInfoView","c","fullExtent","p","tileInfoView","concurrency","process","fetchTile","cachePolicy","acquireTile","releaseTile","requestUpdate","container","requestRender","destroy","clear","removeAllChildren","g","updateRequested","suspended","reset","tiles","_enqueueTileFetch","_bitmapView","createTile","bitmap","getTileCoords","key","x","y","resolution","getTileResolution","width","height","addChild","abort","id","removeChild","once","a","tilemapCache","signal","resamplingLevel","_fetchImage","h","getTileParentId","u","l","fetchAvailabilityUpsample","level","row","col","has","push","source","error","get","allSublayers","toArray","minScale","maxScale","popupTemplate","popupEnabled","visible","createQuery","geometry","createFetchPopupFeaturesQueryGeometry","getRequiredFields","outFields","queryFeatures","features","then","concat","value","Boolean","prototype","w","m","T","overlayPixelSizeInMapUnits","basemapSpatialReference","xmin","min","ymin","xmax","ymax"],"sourceRoot":""}